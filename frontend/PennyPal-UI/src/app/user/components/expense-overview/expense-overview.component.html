<div class="bg-white rounded-3xl shadow-xl hover:shadow-2xl transition-all duration-300 p-6 border border-gray-100 space-y-6">
  <!-- Title & Range Selector -->
  <div class="flex items-center justify-between">
    <h3 class="text-2xl font-bold text-gray-900">All Expenses</h3>
    <select [(ngModel)]="selectedRange"
            (change)="onRangeSelect()"
            class="px-4 py-2 border rounded-lg text-sm">
      <option value="daily">Daily</option>
      <option value="weekly">Weekly</option>
      <option value="monthly">Monthly</option>
      <option value="custom">Custom Range</option>
    </select>
  </div>

  <!-- Custom Range Inputs with Apply Button -->
  <div *ngIf="selectedRange === 'custom'" class="flex items-center gap-2">
    <input type="date" [(ngModel)]="fromDate" class="px-2 py-1 border rounded-lg text-sm" />
    <input type="date" [(ngModel)]="toDate" class="px-2 py-1 border rounded-lg text-sm" />
    <button 
      (click)="onFilterChange()"
      [disabled]="!fromDate || !toDate"
      class="px-3 py-1 bg-blue-500 text-white rounded-lg text-sm hover:bg-blue-600 transition disabled:opacity-50 disabled:pointer-events-none"
    >
      Apply
    </button>
  </div>

  <!-- Donut Chart -->
  <div class="flex justify-center">
    <div class="relative w-32 h-32">
      <svg viewBox="0 0 100 100" class="w-full h-full transform -rotate-90">
        <circle cx="50" cy="50" r="40" stroke="#e5e7eb" stroke-width="8" fill="none" />
        <circle cx="50" cy="50" r="40"
                stroke="url(#gradient)"
                stroke-width="8"
                [attr.stroke-dasharray]="circumference"
                [attr.stroke-dashoffset]="circumference - (totalSpend / maxSpend) * circumference"
                fill="none" />
        <defs>
          <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="0%">
            <stop offset="0%" style="stop-color:#10B981" />
            <stop offset="100%" style="stop-color:#059669" />
          </linearGradient>
        </defs>
      </svg>
      <div class="absolute inset-0 flex flex-col items-center justify-center">
        <span class="text-xs text-gray-500">Spend</span>
        <span class="font-bold text-sm">₹{{ totalSpend }}</span>
      </div>
    </div>
  </div>

  <!-- Category List -->
  <div class="space-y-3">
    <div *ngFor="let expense of expenseCategories" class="flex justify-between items-center p-3 rounded-lg hover:bg-gray-50 transition">
      <div class="flex items-center space-x-3">
        <div class="w-3 h-3 rounded-full" [style.background-color]="expense.category.color"></div>
        <span class="font-medium text-gray-900">{{ expense.category.name }}</span>
      </div>
      <div class="flex items-center space-x-2">
        <span class="font-semibold text-gray-900">-₹{{ expense.amount }}</span>
        <span *ngIf="expense.trend !== 0"
              [ngClass]="{
                'text-red-500': expense.trend < 0,
                'text-green-500': expense.trend > 0
              }"
              class="text-xs font-semibold">
          {{ expense.trend > 0 ? '+' : '' }}{{ expense.trend | number:'1.0-0' }}%
        </span>
      </div>
    </div>

    <!-- Empty State -->
    <div *ngIf="expenseCategories.length === 0" class="text-center py-8">
      <div class="w-12 h-12 mx-auto mb-3 bg-gray-100 rounded-full flex items-center justify-center">
        <svg class="w-6 h-6 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"></path>
        </svg>
      </div>
      <p class="text-gray-500 text-sm">No expenses recorded</p>
    </div>
  </div>
</div>
