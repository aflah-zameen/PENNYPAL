<app-modal-overlay [isOpen]="isModalOpen" (close)="onClose()">
  <!-- Modal Header -->
  <div class="text-center mb-6">
    <div class="mx-auto w-12 h-12 bg-gradient-to-br from-purple-500 via-pink-500 to-orange-400 rounded-full flex items-center justify-center mb-2 mt-5">
      <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
      </svg>
    </div>
    <h1 class="text-2xl font-bold bg-gradient-to-r from-purple-600 via-pink-500 to-orange-400 bg-clip-text text-transparent">
      Add Card
    </h1>
    <p class="text-gray-600 text-sm mt-1">Fill out card details and balance info</p>
  </div>

  <!-- Modal Body -->
  <div class="px-6 pb-6">
    <form (ngSubmit)="onSubmit()" class="grid grid-cols-1 md:grid-cols-2 gap-5">
      
      <!-- Card Holder Name -->
      <div class="col-span-1">
        <label class="block text-sm font-semibold text-gray-700 mb-1">Holder Name <span class="text-red-500">*</span></label>
        <input
          type="text"
          [(ngModel)]="formData.holder"
          name="holder"
          placeholder="e.g., John Doe"
          required
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 bg-gray-50 focus:bg-white transition-all duration-200"
          [class.border-red-500]="errors['holder']"
        />
        <p *ngIf="errors['holder']" class="mt-1 text-sm text-red-600">{{ errors['holder'] }}</p>
      </div>

      <!-- Card Name -->
      <div class="col-span-1">
        <label class="block text-sm font-semibold text-gray-700 mb-1">Card Name <span class="text-red-500">*</span></label>
        <input
          type="text"
          [(ngModel)]="formData.name"
          name="name"
          placeholder="e.g., Federal Bank Visa"
          required
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 bg-gray-50 focus:bg-white transition-all duration-200"
          [class.border-red-500]="errors['name']"
        />
        <p *ngIf="errors['name']" class="mt-1 text-sm text-red-600">{{ errors['name'] }}</p>
      </div>


      <!-- Card Number -->
      <div class="col-span-1">
        <label class="block text-sm font-semibold text-gray-700 mb-1">Card Number <span class="text-red-500">*</span></label>
        <input
          type="text"
          [(ngModel)]="formData.number"
          name="number"
          placeholder="#### #### #### ####"
          required
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 bg-gray-50 focus:bg-white transition-all duration-200"
          [class.border-red-500]="errors['number']"
        />
        <p *ngIf="errors['number']" class="mt-1 text-sm text-red-600">{{ errors['number'] }}</p>
      </div>

      <!-- Expiry Date -->
      <div class="col-span-1">
        <label class="block text-sm font-semibold text-gray-700 mb-1">Expiry <span class="text-red-500">*</span></label>
        <input
          type="text"
          [(ngModel)]="formData.expiry"
          name="expiry"
          placeholder="MM/YY"
          required
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 bg-gray-50 focus:bg-white transition-all duration-200"
          [class.border-red-500]="errors['expiry']"
        />
        <p *ngIf="errors['expiry']" class="mt-1 text-sm text-red-600">{{ errors['expiry'] }}</p>
      </div>

      <!-- Card Type -->
      <div class="col-span-1">
        <label class="block text-sm font-semibold text-gray-700 mb-1">Type <span class="text-red-500">*</span></label>
        <select
          [(ngModel)]="formData.type"
          name="type"
          required
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 bg-gray-50 focus:bg-white transition-all duration-200"
          [class.border-red-500]="errors['type']"
        >
          <option value="" disabled>Select Type</option>
          <option value="visa">Visa</option>
          <option value="mastercard">MasterCard</option>
        </select>
        <p *ngIf="errors['type']" class="mt-1 text-sm text-red-600">{{ errors['type'] }}</p>
      </div>

      <!-- Initial Balance -->
      <div class="col-span-1">
        <label class="block text-sm font-semibold text-gray-700 mb-1">Initial Balance <span class="text-red-500">*</span></label>
        <input
          type="number"
          [(ngModel)]="formData.balance"
          name="balance"
          placeholder="e.g., 2000.00"
          required
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 bg-gray-50 focus:bg-white transition-all duration-200"
          [class.border-red-500]="errors['balance']"
        />
        <p *ngIf="errors['balance']" class="mt-1 text-sm text-red-600">{{ errors['balance'] }}</p>
      </div>

      <!-- Optional Notes -->
      <div class="col-span-1 md:col-span-2">
        <label class="block text-sm font-semibold text-gray-700 mb-1">Notes <span class="text-gray-400 text-xs">(Optional)</span></label>
        <textarea
          [(ngModel)]="formData.notes"
          name="notes"
          rows="2"
          placeholder="Add additional details..."
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 bg-gray-50 focus:bg-white resize-none"
        ></textarea>
      </div>

      <!-- Error Message -->
      <div *ngIf="errors['general']" class="col-span-1 md:col-span-2 p-3 bg-red-50 border border-red-200 rounded-lg">
        <p class="text-sm text-red-600">{{ errors['general'] }}</p>
      </div>

      <!-- Modal Footer -->
      <div class="col-span-1 md:col-span-2 flex justify-end space-x-3 pt-4 border-t border-gray-100 mt-4">
        <button
          type="button"
          (click)="onClose()"
          class="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-300 font-medium"
        >
          Cancel
        </button>
        <button
          type="submit"
          [disabled]="isSubmitting"
          class="bg-gradient-to-r from-purple-600 to-pink-500 hover:from-purple-700 hover:to-pink-600 text-white font-semibold py-2 px-6 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2"
        >
          <svg *ngIf="isSubmitting" class="animate-spin w-4 h-4" fill="none" viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor"
              d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
            </path>
          </svg>
          <span>{{ isSubmitting ? 'Adding Card...' : 'Add Card' }}</span>
        </button>
      </div>
    </form>
  </div>
</app-modal-overlay>
