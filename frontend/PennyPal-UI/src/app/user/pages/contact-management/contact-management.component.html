<div class="min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50">
  <div class="max-w-7xl mx-auto p-6">
    <!-- Header -->
    <div class=" mb-3">
      <h1 class="text-5xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-blue-800 bg-clip-text text-transparent mb-4">
        Contacts
      </h1>
      <p class="text-gray-600 text-lg">Manage your contacts and transactions</p>
    </div>

    <!-- Recent Contacts + Search Bar in one row -->
    <div class="flex flex-col md:flex-row justify-between items-start gap-4">
      <!-- Recent Contacts (left, most width) -->
      <!-- <div class="flex-1">
        <app-recent-contacts 
          *ngIf="!searchTerm"
          [recentContacts]="recentContacts"
          (sendMoney)="onSendMoney($event)"
          (message)="onMessage($event)"
        ></app-recent-contacts>
      </div> -->

      <!-- Search Bar (right, fixed width) -->
      <div class="w-full md:w-80">
        <app-search-bar (searchChange)="onSearchChange($event)"></app-search-bar>
      </div>
    </div>

    <!-- All Contacts Grid -->
    <div class="mb-12">
      <h2 class="text-2xl font-bold text-gray-800 mb-6">All Contacts</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 gap-6">
        <app-contact-card
          *ngFor="let contact of filteredContacts"
          [contact]="contact"
          (sendMoney)="onSendMoney($event)"
          (message)="onMessage($event)"
          (request)="moneyRequest($event)"
        ></app-contact-card>
      </div>
    </div>
  </div>

  <!-- Chat Drawer -->
  <app-chat-drawer
    [isOpen]="isChatOpen"
    [selectedContact]="selectedContact"
    (close)="onCloseChat()"
  ></app-chat-drawer>

  <!-- Money Transfer Modals -->
      <app-send-money-modal
        [isOpen]="isMoneyFlowOpen"
        [recipient]="selectedContact"
        [paymentMethods]="paymentMethods"
        (close)="isMoneyFlowOpen = false"
        (continue)="onAmountConfirmed($event)"
      ></app-send-money-modal>

      <app-pin-confirmation-modal
        [isOpen]="isPinConfirmationOpen"
        [recipient]="selectedContact"
        [amount]="transferData.amount"
        [paymentMethod]="selectedPaymentMethod"
        (close)="isPinConfirmationOpen = false"
        (confirm)="onPinConfirmed($event)"
      ></app-pin-confirmation-modal>

      <app-transaction-status-modal
        [isOpen]="isTransactionStatusOpen"
        [status]="getStatusModalStatus()"
        [recipient]="selectedContact"
        [transaction]="currentTransaction"
        [paymentMethod]="selectedPaymentMethod"
        [failureReason]="failureReason"
        (close)="isTransactionStatusOpen = false"
        (done)="onTransactionDone()"
        (retry)="onRetryTransfer()"
        (viewReceipt)="onViewReceipt($event)"
      ></app-transaction-status-modal>

      <app-transaction-receipt
        [isOpen]="isTransactionReceiptOpen"
        [transaction]="currentTransaction"
        [recipient]="selectedContact"
        [paymentMethod]="selectedPaymentMethod"
        (close)="isTransactionReceiptOpen = false"
      ></app-transaction-receipt>
    </div>
